Wizard. Техническое задание. Итерация 1


Клиент

В левой части экрана находится панель с деревом классов/пакетов. Панель имеет фиксированную ширину и высоту с автоматическими скроллбарами. На первом уровне дерева отображаются пакеты в алфавитном порядке, на втором - классы. В самом верху списка всегда показывается корневой пакет, который отображается как "(root)", но на самом деле не имеет названия. Любой элемент списка можно выбрать, кликнув по нему.

В центральной части экрана отображается основная панель фиксированного размера с автоматическим вертикальным скроллбаром. Содержимое основной панели зависит от того, какой класс или пакет сейчас выбран.

В правой части экрана находится панель копирования/вставки. Панель имеет фиксированную ширину и высоту с автоматическими скроллбарами.


Пакет

При клике по пакету на центральной панели появляются следующие элементы:
- Кнопки "Create child package", "Create class", "Delete package" (кроме корневого пакета)
- Поле для ввода имени пакета
- Элемент для выбора родительского пакета (кроме корневого)

При нажатии на кнопку "Create child package" мгновенно создается и выбирается подпакет с названием "newpackage". Автоматически фокусируется поле для ввода имени пакета.

При нажатии на кнопку "Create class" мгновенно создается и выбирается класс с названием "newclass". Автоматически фокусируется поле для ввода имени класса.

При нажатии на кнопку "Delete package" он мгновенно удаляется. В новых итерациях для восстановления удаленного пакета будут добавлены операция "Undo" и "Revert".

При изменении значения в поле ввода имени пакета его имя мгновенно обновляется во всех частях программы. Если при вводе имя пакета совпало с именем другого пакета или класса, то будет отображен желтый треугольник <!> со всплывающей подсказкой, сообщающей об этом, хотя на работоспособность программы это никак не повлияет.

При изменении родительского пакета расположение текущего пакета мгновенно обновляется во всех частях программы.


Класс

При клике по классу на центральной панели появляется редактор класса. Редактор представляет собой многострочный текст с отступами, некоторые фрагменты которого можно править через встроенные элементы управления.

При первом создании класса отображается следующий текст:

[+] [class] [newclass]
        generic types [+]
        extends [Class]
        implements [+]
        fields [+]
[+]     constructors [+]
[+]         constructor [default]
                arguments [+]
                variables [+]
[+]             actions [+]
                    super constructor [default]()
        methods [+] // can be final!
        static fields [+]
        static methods [+]

Любую строчку, после которой добавляется отступ, можно свернуть, кликнув по кнопке [+] слева.

Запись [class] является выпадающим списком со значениями "interface", "abstract class", "class", "final class", "static class", "enum". При выборе другого значения меняется содержимое объекта, поэтому рассмотрим их позже.
Замечание. Встроенные классы "Number", "String", "Boolean", "Array", "Map" в пакете "jjs.lang" имеют тип "final class". Встроенный класс "jjs.lang.Class" имеет тип "class".

Запись [newclass] является текстовым полем для ввода имени класса. Правила ввода имени такие же, как и для пакета.

Запись "generic types [+]" обозначает, что "generic types" является списком, в который можно добавить элементы кнопкой [+].

Список "generic types" заполняется строками вида "[T] extends [Class]". [T] является текстовым полем для ввода имени шаблонного типа. [Class] является элементом выбора класса. Базовый класс шаблонного типа может иметь тип "interface", "abstract class", "class", "final class".

Запись [Class] является элементом выбора класса (см. ниже). Базовый класс может иметь тип "abstract class" или "class".

Список "implements" заполняется строками вида "[none]". [none] является элементом выбора класса, включающим только классы типа "interface". Если интерфейс имеет шаблонные типы, элементы для их выбора появятся справа в угловых скобках.

Список "fields" заполняется строками вида "[private] [Class] [newfield] = [null]". [private] является выпадающим списком со значениями "private", "protected", "public". [Class] является элементом выбора класса. Класс поля может иметь любой тип. [newfield] является текстовым полем для ввода имени поля. [null] является элементом выражения для выбора стартового значения поля (см. ниже). Выражение может включить любые значения в области видимости, включая статические поля/методы и поля. Будет проверяться наличие циклических зависимостей.

Список "constructors" заполняется конструкторами класса (см. ниже).

Список "methods" заполняется методами класса (см. ниже).

Список "static fields" заполняется строками вида "[private] [Class] [newfield] = [null]", по аналогии с "fields". Единственное отличие состоит в том, что статические поля объявляются раньше обычных, поэтому область видимости их стартовых выражений уже.

Список "static methods" заполняется статическими методами класса (см. ниже).


Элемент выбора класса

Элемент показывает краткое имя класса. При наведении указателя мыши на элемент появляется подсказка с полным именем класса. При клике текст в поле выделяется и ниже/выше появляется окно для выбора класса. Окно состоит из трех частей: все классы, избранное в классе и избранное в проекте. Класс можно выбрать из списка, либо ввести с клавиатуры. При вводе с клавиатуры все три списка фильтруются по вводу по аналогии с тем, как это делает NetBeans, а именно:

- Показывает классы, название которых начинается с введенных букв без учета регистра
- Если ввод происходит в одном регистре (верхнем или нижнем), то показывает классы, слова которых начинаются с введенных букв в том же порядке без пропусков
- Если ввод состоит из слов с больших букв, то показывает классы, которые содержат введенные слова в произвольном порядке
- Можно начинать ввод с названий пакетов

При вводе с клавиатуры список сортируется по релевантности. Наиболее релевантный класс, стоящий вверху, всегда выбран, так что при клике за пределами поля или окна этот класс сохраняется в элементе.

Выбранный класс можно добавить в избранное, кликнув по звездочке над соответствующим списком.


Панель копирования/вставки

